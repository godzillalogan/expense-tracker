<div class="mt-5 container">
  <div class="d-flex w-50 mx-auto">
    <div class="mx-4">必填欄位*</div>
    <div>請修改你的支出</div>
  </div>
  <form action="/records/{{record._id}}/?_method=PUT" method="POST" id="form" class="mt-5 w-75 mx-auto" novalidate>
    <div class="mb-3 form-group d-flex justify-content-around">
      <label for="name" class="form-label">名稱* :</label>
      <div class="w-75">
        <input type="text" class="form-control" name="name" id="name" placeholder="name" value="{{record.name}}" required>
        <div class="valid-feedback">OK!</div>
        <div class="invalid-feedback">This field is required.</div>
      </div>
    </div>
    <div class="mb-3 form-group d-flex justify-content-around">
      <label for="date" class="form-label">日期* :</label>
      <div class="w-75">
        <input type="date" class="form-control" name="date" id="date" placeholder="date" value="{{record.date}}" required>
        <div class="valid-feedback">OK!</div>
        <div class="invalid-feedback">This field is required.</div>
      </div>
    </div>
    <div class="mb-3 form-group d-flex justify-content-around">
      <label for="category" class="form-label">分類* :</label>
      <div class="w-75">
        <select type="text" list="categorylist" class="form-control " name="category" id="category"
          placeholder="Category" value="{{record.category}}" required>
          {{#each categories}}
            <option value="{{this.categoryName}}" {{categorySelected this.categoryName ../record.category}}>{{this.categoryName}}</option>
          {{/each}}
        </select>
      </div>
      <div class="valid-feedback">OK!</div>
      <div class="invalid-feedback">This field is required.</div>
    </div>
    <div class="mb-3 form-group d-flex justify-content-around">
      <label for="amount" class="form-label">金額* :</label>
      <div class="w-75">
        <input type="number" min="1" class="form-control" name="amount" id="amount" placeholder="amount" value="{{record.amount}}" required>
        <div class="valid-feedback">OK!</div>
        <div class="invalid-feedback">This field is required.</div>
      </div>
    </div>
    <div class="d-flex justify-content-center">
      <button type="submit" class="btn btn-outline-info" id="submit-button">送出</button>
    </div>
  </form>
</div>

<script>
  const submitButton = document.querySelector('#submit-button')
  const form = document.querySelector('#form')

  submitButton.addEventListener('click', function onSubmitButtonClicked(event) {
    form.classList.add('was-validated')
  })
  form.addEventListener('submit', function onFormSubmitted(event) {
    if (!form.checkValidity()) {
      event.stopPropagation()
      event.preventDefault()
    }
  })
</script>